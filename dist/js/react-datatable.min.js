!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.RDT=t(require("react")):e.RDT=t(e.React)}(this,function(e){return function(e){function t(s){if(r[s])return r[s].exports;var n=r[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var s=r(2),n=r(4)(r(1),r(3));n.datasource=function(e,t){return new s(e,t)},e.exports=n},function(t){t.exports=e},function(e,t,r){"use strict";var s=r(10).EventEmitter,n=function(e,t){if(e instanceof Array)this.records=t?e.map(t):e;else{var r=e.data,s=e.datasource;this.records=s[r]}};n.prototype=s.prototype,n.prototype.constructor=n,n.prototype.record=function(e){return this.records[e]},n.prototype.empty=function(){this.records=[],this.emit("recordsUpdated")},n.prototype.append=function(e){this.records.push(e),this.emit("recordAdded",e)},n.prototype.length=function(){return this.records.length},n.prototype.map=function(e,t){if(!e)return this.records.map(t);for(var r=[],s=0,n=e.startIdx;n<e.endIdx;n++)r.push(t(this.records[n],s++,n));return r},n.prototype.updateRecord=function(e,t,r,s){var n=this.records[e],i=s.path?s.path:t,o=s.setter?function(e,t,r){var s=r.setter;"string"==typeof r.setter?n[r.setter](e,t,r):s.call(n,e,t,r)}:function(){i.split(".").reduce(function(e,t,s,n){return s!==n.length-1?e[t]:void("function"==typeof e[t]?e[t](r):e[t]=r)},n)};o.call(n,r,t,s),this.emit("recordUpdated",n,e,t,r)},e.exports=n},function(e,t,r){var s=r(1),n=r(2),i=r(5),o=(r(6),r(7)),a=r(8),p=r(9),h={pure:{table:"pure-table pure-table-bordered"},"pure-striped":{table:"pure-table pure-table-bordered pure-table-striped"},bootstrap:{table:"table table-bordered"},foundation:{table:""}},c=s.createClass({displayName:"RDT",componentWillReceiveProps:function(e){this.componentDidMount(e)},nextPage:function(){this.pager&&(this.pager=this.pager.next(),this.setState({pager:this.pager.state()}))},add:function(e){this.ds.add(e);var t=null;this.pager&&(t=this.pager.state()),this.setState({pager:t})},onDsChangeEvent:function(){this.props.onChange&&this.props.onChange()},componentDidMount:function(e){var t=this.props;e&&(t=e),t.data?this.setState({datasource:new n(t.data)}):t.datasource&&this.setDataSource(t.datasource)},getInitialState:function(){var e=new n([]),t=null;return this.props.config.pager&&this.props.config.pager&&(t=new i(1,this.props.config.pager.rowsPerPage,this.ds)),{datasource:e,pager:t}},pagerUpdated:function(e){this.pager&&(this.pager=this.pager.toPage(e),this.setState({pager:this.pager.state()}))},render:function(){var e=h[this.props.config.style],t=this.props.config,r=this.state.datasource,n=null;return this.state.pager&&(n=s.createElement(p,{datasource:r,config:this.props.config,pageChangedListener:this.pagerUpdated})),s.createElement("div",null,s.createElement("div",{className:"rdt-container",ref:"container"},s.createElement("table",{className:e.table},s.createElement(o,{config:t}),s.createElement(a,{config:t,datasource:r,pager:this.state.pager}))),n)},setDataSource:function(e){"function"==typeof e.then?e.then(function(e){this.setState({datasource:new n(e,this.props.mapper)})}.bind(this)):this.setState({datasource:e})}});e.exports=c},function(e){"use strict";var t=function(e,t,r){return e.createElement(t,r)},r=function(e,r,s,n){var i={},o=null;return s.tagName&&s.nodeName&&"number"==typeof s.nodeType||"string"==typeof s?o=s:(i=s,o="string"==typeof n?document.getElementById(n):n),e.render(t(e,r,i),o)},s=function(e,s){return{cls:s,el:function(r){return t(e,s,r)},render:function(t,n){return r(e,s,t,n)}}};e.exports=s},function(e){"use strict";var t=function(e,t,r){this.datasource=r,this.page=e,this.rowsPerPage=t,this.startIdx=(this.page-1)*t,this.endIdx=this.startIdx+this.rowsPerPage<this.datasource.records.length?this.startIdx+this.rowsPerPage:this.startIdx+(this.datasource.records.length-this.startIdx)};t.prototype.next=function(){return this.move(1)},t.prototype.previous=function(){return this.move(-1)},t.prototype.toPage=function(e){return this.move(e-this.page)},t.prototype.maxPage=function(){var e=parseInt(this.datasource.records.length/this.rowsPerPage);return this.datasource.records.length%this.rowsPerPage>0&&(e+=1),e},t.prototype.move=function(e){var r=this.maxPage();return this.page+e>r||this.page+e<0?this:new t(this.page+e,this.rowsPerPage,this.datasource)},t.prototype.state=function(){return{page:this.page+1,startIdx:this.startIdx,endIdx:this.endIdx,rowsPerPage:this.rowsPerPage}},e.exports=t},function(e,t,r){var s=r(1),n=r(11),i=s.createClass({displayName:"RDTRow",componentWillReceiveProps:function(e){this.setState({record:e.record})},getInitialState:function(){return{record:this.props.record}},onCellChange:function(){this.setState({record:this.props.record})},render:function(){var e=this.props.config.cols,t=this.state.record,r=this.props.ds;return s.createElement("tr",{"data-index":this.props.index},e.map(function(e,i){return s.createElement(n,{onCellChange:this.onCellChange,index:this.props.index,key:i,ds:r,col:e,property:e.property,record:t,path:e.path})}.bind(this)))}});e.exports=i},function(e,t,r){var s=r(1),n=s.createClass({displayName:"RDTColumn",render:function(){var e=this.props.config.cols;return s.createElement("thead",null,s.createElement("tr",null,e.map(function(e,t){return s.createElement("td",{key:t+100},e.header)})))}});e.exports=n},function(e,t,r){var s=r(1),n=r(6),i=s.createClass({displayName:"RDTBody",componentWillReceiveProps:function(e){this.setState({pager:e.pager,ds:e.datasource})},getInitialState:function(){return{pager:this.props.pager,ds:this.props.datasource}},render:function(){return s.createElement("tbody",null,this.state.ds.map(this.state.pager,function(e,t,r){var i=t;return r&&!Array.isArray(r)&&(i=r),s.createElement(n,{index:i,ds:this.state.ds,key:i,record:e,config:this.props.config})}.bind(this)))}});e.exports=i},function(e,t,r){var s=r(1),n=s.createClass({displayName:"Paginator",getInitialState:function(){return{page:this.props.page}},componentWillReceiveProps:function(e){this.setState({page:e.page})},pageSelectionHandler:function(){this.props.pageChangedListener&&this.props.pageChangedListener(this.refs.pageSelection.getDOMNode().value)},render:function(){var e=this.state.page,t=[],r=parseInt(this.props.datasource.records.length/this.props.config.pager.rowsPerPage);this.props.datasource.records.length%this.props.config.pager.rowsPerPage!=0&&(r+=1);for(var n=1;r>=n;n++)t.push(n);return s.createElement("div",{className:"rdt-paginator"},s.createElement("div",null,s.createElement("select",{value:e,ref:"pageSelection",onChange:this.pageSelectionHandler},t.map(function(e){return s.createElement("option",{key:e,value:e},e)}))))}});e.exports=n},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function s(e){return"number"==typeof e}function n(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,s,o,a,p,h;if(this._events||(this._events={}),"error"===e&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(s=this._events[e],i(s))return!1;if(r(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),p=1;o>p;p++)a[p-1]=arguments[p];s.apply(this,a)}else if(n(s)){for(o=arguments.length,a=new Array(o-1),p=1;o>p;p++)a[p-1]=arguments[p];for(h=s.slice(),o=h.length,p=0;o>p;p++)h[p].apply(this,a)}return!0},t.prototype.addListener=function(e,s){var o;if(!r(s))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(s.listener)?s.listener:s),this._events[e]?n(this._events[e])?this._events[e].push(s):this._events[e]=[this._events[e],s]:this._events[e]=s,n(this._events[e])&&!this._events[e].warned){var o;o=i(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function s(){this.removeListener(e,s),n||(n=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var n=!1;return s.listener=t,this.on(e,s),this},t.prototype.removeListener=function(e,t){var s,i,o,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=this._events[e],o=s.length,i=-1,s===t||r(s.listener)&&s.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n(s)){for(a=o;a-->0;)if(s[a]===t||s[a].listener&&s[a].listener===t){i=a;break}if(0>i)return this;1===s.length?(s.length=0,delete this._events[e]):s.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[e],r(s))this.removeListener(e,s);else for(;s.length;)this.removeListener(e,s[s.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.listenerCount=function(e,t){var s;return s=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},function(e,t,r){var s=r(1),n=s.createClass({displayName:"RDTCell",componentWillReceiveProps:function(e){this.setState({record:e.record,editMode:!1})},convertToType:function(e,t){return"number"==typeof e?e%1===0?parseInt(t):parseFloat(t):t},getDisplayStyle:function(){var e=this.refs.td.getDOMNode(),t=e.offsetWidth,r=e.offsetHeight,s=e.offsetLeft,n=e.offsetTop;return{width:t,height:r,top:n,left:s}},componentDidMount:function(){this.refs.input&&this.refs.input.getDOMNode().focus()},componentDidUpdate:function(){this.refs.input&&this.refs.input.getDOMNode().focus()},onClickHandler:function(e){e.target;!this.state.editMode&&this.props.col.editable&&this.setState({record:this.state.record,property:this.state.property,editMode:!0})},onKeyUp:function(e){var t=e.type,r=e.which,s=13;if("keyup"===t&&r===s&&this.refs.input){{var n=this.convertToType(this.state.record[this.state.property],this.refs.input.getDOMNode().value),i=this.props.ds;this.props.index}i.updateRecord(this.props.index,this.props.property,n,this.props.col),this.setState({record:this.state.record,editMode:!1}),this.props.onCellChange&&this.props.onCellChange()}},onInputChange:function(){},onBlur:function(){this.setState({editMode:!1})},getInitialState:function(){return{record:this.props.record,editMode:!1}},createEditor:function(){var e=this.props.col.editable||!1,t=this.state.editMode;return e&&t?s.createElement("input",{onKeyUp:this.onKeyUp,ref:"input",onBlur:this.onBlur,className:"rdt-editor",style:this.getDisplayStyle(),onKeyUp:this.onKeyUp,onChange:this.onInputChange,ref:"input",defaultValue:this.getValue()}):null},getValue:function(){var e="",t=this.props.path,r=this.state.record,s=this.props.property;return"string"==typeof s&&(t?e="string"==typeof t?t.split(".").reduce(function(e,t){return e&&t?e[t]:null},r):t(s,r):(e=r[s],"function"==typeof e&&(e=e.call(r)))),e},render:function(){var e=this.state.record,t=this.props.property,r=this.getValue();return this.props.col.formatter&&(r=this.props.col.formatter(r,t,e,s)),s.createElement("td",{ref:"td",onClick:this.onClickHandler,"data-property":t,key:t},s.createElement("div",null,r),this.createEditor())}});e.exports=n}])});